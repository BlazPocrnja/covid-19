(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{284:function(e,t,a){},414:function(e,t,a){e.exports=a(695)},419:function(e,t,a){},695:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(28),i=a.n(r),c=(a(419),a(107)),l=a(43),s=(a(284),a(703)),d=a(705),u=a(708),m=a(68),f=a(706),p=a(709),h=a(710),g=a(704),v=a(707),b=a(342),y=a.n(b),E=a(50),O=a(126),C=a(345),j=a(384),w=a(385);E.i(j.a),E.i(w.a);var S=function(e){var t=e.data,a=e.onCountryClick,r=Object(n.useState)(),i=Object(l.a)(r,2),c=i[0],s=i[1],d=Object(n.useState)(),u=Object(l.a)(d,2),m=u[0],f=u[1];return Object(n.useEffect)((function(){var e=E.g("globechartdiv",O.b);try{e.geodata=C.a}catch(h){e.raiseCriticalError(new Error('Map geodata could not be loaded. Please download the latest <a href="https://www.amcharts.com/download/download-v4/">amcharts geodata</a> and extract its contents into the same directory as your amCharts files.'))}var t=e.createChild(E.b);t.text="Select a country to view statistics.",t.fontSize=12,t.align="left",t.valign="bottom",t.background=new E.c,t.background.cornerRadius(10,10,10,10),t.padding(10,10,10,10),t.marginLeft=30,t.marginBottom=30,t.background.strokeOpacity=.3,t.background.fillOpacity=.6;var n=e.createChild(E.e);n.text="Data source: github.com/pomber/covid19",n.fontSize=12,n.align="left",n.valign="top",n.url="https://github.com/pomber/covid19",n.urlTarget="_blank",n.padding(10,10,10,10),n.marginLeft=30,n.marginTop=30;var o=e.createChild(E.a);o.icon=new E.d,o.icon.path="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z",o.fontSize=12,o.align="right",o.valign="top",o.url="https://github.com/blazpocrnja/covid-19",o.urlTarget="_blank",o.padding(10,10,10,10),o.marginRight=30,o.marginTop=30,o.tooltipText="View source code",e.projection=new O.f.Orthographic,e.panBehavior="rotateLongLat",e.padding(20,20,20,20),e.zoomControl=new O.d;var r=new E.a;r.events.on("hit",(function(){e.goHome()})),r.icon=new E.d,r.padding(7,5,7,5),r.width=30,r.icon.path="M16,8 L14,8 L14,16 L10,16 L10,10 L6,10 L6,16 L2,16 L2,8 L0,8 L8,0 L16,8 Z M16,8",r.marginBottom=10,r.parent=e.zoomControl,r.insertBefore(e.zoomControl.plusButton),e.backgroundSeries.mapPolygons.template.polygon.fillOpacity=.1,e.backgroundSeries.mapPolygons.template.polygon.fill=E.f("#ffffff"),e.deltaLongitude=20,e.deltaLatitude=-20,e.adapter.add("deltaLatitude",(function(e){return E.h.fitToRange(e,-90,90)}));var i=e.series.push(new O.c);i.useGeodata=!0,i.calculateVisualCenter=!0,i.tooltip.background.fill=E.f("#47c78a"),i.tooltip.background.fillOpacity=.8,i.tooltip.background.cornerRadius=20;var c=i.mapPolygons.template;c.nonScalingStroke=!0,c.fill=E.f("#47c78a"),c.stroke=E.f("#454a58"),i.calculateVisualCenter=!0,c.propertyFields.id="id",c.tooltipPosition="fixed",c.fillOpacity=1,c.events.on("over",(function(e){e.target.dummyData&&(e.target.dummyData.isHover=!0)})),c.events.on("out",(function(e){e.target.dummyData&&(e.target.dummyData.isHover=!1)})),c.events.on("hit",(function(e){a(e.target.dataItem.dataContext.name)}));var l=i.mapPolygons.template.states.create("hover");l.properties.fillOpacity=1,l.properties.fill=e.colors.getIndex(0).brighten(-.5);var d=e.series.push(new O.a);d.mapLines.template.stroke=E.f("#fff"),d.fitExtent=!1,d.mapLines.template.strokeOpacity=.2,d.mapLines.template.stroke=E.f("#fff");var u=e.series.push(new O.c);u.tooltip.background.fillOpacity=.8,u.tooltip.background.cornerRadius=20,u.tooltip.autoTextColor=!1,u.tooltip.label.fill=E.f("#000"),u.tooltip.dy=-5;var m=u.mapPolygons.template;m.fill=E.f("#bf7569"),m.strokeOpacity=0,m.fillOpacity=.75,m.tooltipPosition="fixed",m.events.on("hit",(function(e){a(e.target.tooltipText.split(":")[0])}));var p=u.mapPolygons.template.states.create("hover");p.properties.fillOpacity=1,p.properties.fill=E.f("#86240c"),s(i),f(u)}),[]),Object(n.useEffect)((function(){c&&c.mapPolygons.each((function(e){var a=0,n=t[e.dataItem.dataContext.name];if(n&&n.length&&(a=n[n.length-1].confirmed),a>0){var o=m.mapPolygons.create();o.multiPolygon=O.e(e.visualLongitude,e.visualLatitude,Math.max(.2,Math.log(a)*Math.LN10/10)),o.tooltipText=e.dataItem.dataContext.name+": "+a,e.dummyData=o,o.events.on("over",(function(){e.isHover=!0})),o.events.on("out",(function(){e.isHover=!1}))}else e.tooltipText=e.dataItem.dataContext.name+": no data",e.fillOpacity=.9}))}),[t]),o.a.createElement("div",{id:"globechartdiv",style:{width:"100%",height:"100%",backgroundColor:"#454a58"}})},x=a(56),k=function(e){var t=e.data,a=e.trendLine,r=e.handleBrushChange,i=Object(n.useState)(),s=Object(l.a)(i,2),d=s[0],u=s[1],m=Object(n.useState)(),f=Object(l.a)(m,2),p=f[0],h=f[1],g=Object(n.useState)([]),v=Object(l.a)(g,2),b=v[0],y=v[1];Object(n.useEffect)((function(){t.length>=30&&(u(t.length-30),h(t.length-1),r({startIndex:t.length-30,endIndex:t.length-1}))}),[t]),Object(n.useEffect)((function(){y(t.map((function(e){return Object(c.a)({},e,{trend:(a.find((function(t){return t.date===e.date}))||{value:void 0}).value})})))}),[t,a]);return o.a.createElement(x.g,null,o.a.createElement(x.f,{data:b,margin:{top:20,right:20,left:20,bottom:20}},o.a.createElement(x.i,{dataKey:"date",label:{value:"Date",offset:-80,position:"insideBottom"},tickFormatter:function(e){return new Date(e).toLocaleDateString()}}),o.a.createElement(x.j,{dataKey:"value",label:{value:"Growth Rate",angle:-90,position:"insideLeft"}}),o.a.createElement(x.d,{strokeDasharray:"3 3"}),o.a.createElement(x.h,{labelFormatter:function(e){return new Date(e).toLocaleDateString()}}),o.a.createElement(x.e,{name:"Actual",type:"monotone",dataKey:"value",stroke:"#8884d8"}),o.a.createElement(x.e,{name:"Trend",type:"monotone",dataKey:"trend",stroke:"#82ca9d"}),o.a.createElement(x.c,{startIndex:d,endIndex:p,onChange:function(e){u(e.startIndex),h(e.endIndex),r(e)}})))},D=a(38),L=function(e){var t=e.data,a=e.estimatedData,r=(e.yAxisLabel,Object(n.useState)([])),i=Object(l.a)(r,2),c=i[0],s=i[1];return Object(n.useEffect)((function(){s([].concat(Object(D.a)(t),Object(D.a)(a)))}),[t,a]),o.a.createElement(x.g,null,o.a.createElement(x.b,{data:c,margin:{top:10,right:30,left:0,bottom:0}},o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1"},o.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),o.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),o.a.createElement("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1"},o.a.createElement("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),o.a.createElement("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0}))),o.a.createElement(x.i,{dataKey:"date",label:{value:"Date",offset:-80,position:"insideBottom"},tickFormatter:function(e){return new Date(e).toLocaleDateString()}}),o.a.createElement(x.j,null),o.a.createElement(x.d,{strokeDasharray:"3 3"}),o.a.createElement(x.h,{labelFormatter:function(e){return new Date(e).toLocaleDateString()}}),o.a.createElement(x.a,{name:"Actual",type:"monotone",dataKey:"value",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorUv)"}),o.a.createElement(x.a,{name:"Estimate",type:"monotone",dataKey:"estimate",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorPv)"})))};var T=a(355),I=s.a.Content,P=s.a.Sider,B=d.a.Title;var K=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),d=Object(l.a)(i,2),b=d[0],E=d[1],O=Object(n.useState)([]),C=Object(l.a)(O,2),j=C[0],w=C[1],x=Object(n.useState)([]),D=Object(l.a)(x,2),K=D[0],M=D[1],z=Object(n.useState)([]),R=Object(l.a)(z,2),F=R[0],A=R[1],H=Object(n.useState)([]),G=Object(l.a)(H,2),U=G[0],V=G[1],W=Object(n.useState)([]),J=Object(l.a)(W,2),Z=J[0],_=J[1],q=Object(n.useState)([]),N=Object(l.a)(q,2),$=N[0],Q=N[1],X=Object(n.useState)(""),Y=Object(l.a)(X,2),ee=Y[0],te=Y[1],ae=Object(n.useState)(""),ne=Object(l.a)(ae,2),oe=ne[0],re=ne[1];Object(n.useEffect)((function(){fetch("https://pomber.github.io/covid19/timeseries.json").then((function(e){return e.json()})).then((function(e){var t=Object(c.a)({},e,{"United States":e.US,"South Korea":e["Korea, South"]});delete t.US,delete t["Korea, South"],r(t)}))}),[]),Object(n.useEffect)((function(){var e=[];for(var t in a)e.push(Object(c.a)({key:t,country:t},a[t][a[t].length-1]));E(e)}),[a]),Object(n.useEffect)((function(){if(""!==ee){for(var e=[],t=[],n=[],o=0;o<(a[ee]||[]).length;++o){var r=a[ee][o].date;if(e.push({date:new Date(r).getTime(),value:a[ee][o].confirmed}),o>=2){var i=a[ee][o-1].confirmed-a[ee][o-2].confirmed,c=a[ee][o].confirmed-a[ee][o-1].confirmed,l=0===i?0:c/i;n.push({date:new Date(r).getTime(),value:l}),t.push({date:new Date(r).getTime(),value:c})}else n.push({date:new Date(r).getTime(),value:0})}A(e),_(t),w(n)}}),[ee]);var ie=Object(T.debounce)((function(e){for(var t=e.startIndex,n=e.endIndex,o=[],r=[],i=t;i<=n;++i)o.push(j[i].date),r.push(j[i].value);for(var c=function(e,t){for(var a={},n=t.length,o=0,r=0,i=0,c=0,l=0,s=0;s<t.length;s++)o+=e[s],r+=t[s],i+=e[s]*t[s],c+=e[s]*e[s],l+=t[s]*t[s];return a.slope=(n*i-o*r)/(n*c-o*o),a.intercept=(r-a.slope*o)/n,a.r2=Math.pow((n*i-o*r)/Math.sqrt((n*c-o*o)*(n*l-r*r)),2),a}(o,r),l=[],s=t;s<=n;++s){var d=Math.max(c.slope*j[s].date+c.intercept,0);l.push({date:j[s].date,value:d})}M(l);for(var u=[],m=[],f=a[ee],p=new Date(f[n].date),h=f[n].confirmed-f[n-1].confirmed,g=f[n].confirmed,v=1;v<=365;++v){var b=new Date(p);b.setDate(b.getDate()+v),g+=h*=Math.max(c.slope*b.getTime()+c.intercept,0),m.push({date:b.getTime(),estimate:h}),u.push({date:b.getTime(),estimate:g})}Q(m),V(u)}),500),ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,a=void 0,n=function(e,t,a){t(),re(e[0])},r=function(e){e(),re("")};return{filterDropdown:function(i){var c=i.setSelectedKeys,l=i.selectedKeys,s=i.confirm,d=i.clearFilters;return o.a.createElement("div",{style:{padding:8}},o.a.createElement(u.a,{ref:function(e){a=e},placeholder:"Search ".concat(t),value:l[0],onChange:function(e){return c(e.target.value?[e.target.value]:[])},onPressEnter:function(){return n(l,s,e)},style:{width:188,marginBottom:8,display:"block"}}),o.a.createElement(m.a,{type:"primary",onClick:function(){return n(l,s,e)},icon:o.a.createElement(v.a,null),size:"small",style:{width:90,marginRight:8}},"Search"),o.a.createElement(m.a,{onClick:function(){return r(d)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return o.a.createElement(v.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.select()}))},render:function(e){return o.a.createElement(y.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[oe],autoEscape:!0,textToHighlight:e.toString()})}}},le=[Object(c.a)({title:"Country",dataIndex:"country",sorter:function(e,t){return e.country.localeCompare(t.country)}},ce("country","countries")),Object(c.a)({title:"Confirmed",dataIndex:"confirmed",align:"right",sorter:function(e,t){return e.confirmed-t.confirmed},defaultSortOrder:"descend"},ce("confirmed")),Object(c.a)({title:"Deaths",dataIndex:"deaths",align:"right",sorter:function(e,t){return e.deaths-t.deaths}},ce("deaths")),Object(c.a)({title:"Recovered",dataIndex:"recovered",align:"right",sorter:function(e,t){return e.recovered-t.recovered}},ce("recovered"))];return o.a.createElement(s.a,{style:{height:"100vh",width:"100vw"}},o.a.createElement(I,null,o.a.createElement(f.a,{bodyStyle:{height:"95vh",overflow:"auto"},width:"95vw",centered:!0,visible:""!==ee,footer:null,onCancel:function(){return te("")}},o.a.createElement(p.a,{style:{height:"4%"}},o.a.createElement(h.a,{span:24},o.a.createElement(B,{level:4,style:{textAlign:"center"}},"Daily Growth Factor"))),o.a.createElement(p.a,{style:{height:"46%"}},o.a.createElement(h.a,{span:24},o.a.createElement(k,{data:j,trendLine:K,handleBrushChange:ie}))),o.a.createElement(p.a,{style:{height:"4%"}},o.a.createElement(h.a,{span:12},o.a.createElement(B,{level:4,style:{textAlign:"center"}},"Daily Cases")),o.a.createElement(h.a,{span:12},o.a.createElement(B,{level:4,style:{textAlign:"center"}},"Total Cases"))),o.a.createElement(p.a,{style:{height:"46%"}},o.a.createElement(h.a,{span:12},o.a.createElement(L,{data:Z,estimatedData:$})),o.a.createElement(h.a,{span:12},o.a.createElement(L,{data:F,estimatedData:U})))),o.a.createElement(S,{data:a,onCountryClick:function(e){return te(e)}})),o.a.createElement(P,{width:"35%",theme:"light"},o.a.createElement(g.a,{size:"small",columns:le,dataSource:b,pagination:!1,scroll:{y:"calc(100vh - 39px)"},onRow:function(e,t){return{onClick:function(){return te(e.country)}}}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[414,1,3]]]);
//# sourceMappingURL=main.dcfa0af8.chunk.js.map